[INFO] Scanning for projects...
[INFO] 
[INFO] ------------------------< com.kotor:ncsdecomp >-------------------------
[INFO] Building NCSDecomp 1.0.0
[INFO]   from pom.xml
[INFO] --------------------------------[ jar ]---------------------------------
[INFO] 
[INFO] --- resources:3.3.1:resources (default-resources) @ ncsdecomp ---
[INFO] Copying 5 resources from src\main\resources to target\classes
[INFO] 
[INFO] --- compiler:3.11.0:compile (default-compile) @ ncsdecomp ---
[INFO] Nothing to compile - all classes are up to date
[INFO] 
[INFO] --- resources:3.3.1:testResources (default-testResources) @ ncsdecomp ---
[INFO] Copying 0 resource from src\test\resources to target\test-classes
[INFO] 
[INFO] --- compiler:3.11.0:testCompile (default-testCompile) @ ncsdecomp ---
[INFO] Nothing to compile - all classes are up to date
[INFO] 
[INFO] --- surefire:3.1.2:test (default-test) @ ncsdecomp ---
[INFO] Using auto detected provider org.apache.maven.surefire.junitplatform.JUnitPlatformProvider
[INFO] 
[INFO] -------------------------------------------------------
[INFO]  T E S T S
[INFO] -------------------------------------------------------
[INFO] Running com.kotor.resource.formats.ncs.NCSDecompCLIBytecodeRoundTripTest
=== Preflight Checks ===
Using existing Vanilla_KOTOR_Script_Source repository at: .
? Found compiler: tools/nwnnsscomp.exe
? Found K1 nwscript: src/main/resources/k1_nwscript.nss
? Found K1 ASC nwscript: tools/k1_asc_nwscript.nss
? Found TSL nwscript: src/main/resources/tsl_nwscript.nss
? Vanilla repo structure verified
=== Preflight Complete ===

=== Discovering Test Files ===
Found 23318 .nss files
=== Test Discovery Complete ===

=== Running Bytecode Round-Trip Tests (NSS -> NCS -> NSS -> NCS) ===
Total tests: 23318
Fast-fail: enabled (will stop on first failure)

[1/23318] K1/Data/scripts.bif/01_test.nss
  Compiling K1/Data/scripts.bif/01_test.nss to .ncs with nwnnsscomp.exe (tools/nwnnsscomp.exe -c K1/Data/scripts.bif/01_test.nss -o roundtrip-work/k1/K1/Data/scripts.bif/01_test.ncs) ? (137.509 ms)
  Decompiling 01_test.ncs back to .nss (game=k1, output=01_test.dec.nss)read actions.  There were 772
 ? (913.010 ms)
  Recompiling 01_test_dec.nss to .ncs (tools/nwnnsscomp.exe -c roundtrip-work/k1/K1/Data/scripts.bif/01_test_dec.nss -o roundtrip-work/k1/K1/Data/scripts.bif/01_test.rt.ncs) ? (58.148 ms)
  Comparing bytecode 01_test.ncs vs 01_test.rt.ncs  Result: ? FAILED

???????????????????????????????????????????????????????????
BYTECODE FAILURE: K1: K1\Data\scripts.bif\01_test.nss
???????????????????????????????????????????????????????????
Exception: IllegalStateException
Message: Bytecode mismatch for K1/Data/scripts.bif/01_test.nss
Offset: 12
Original length: 23 bytes
Round-trip length: 29 bytes
Original byte: 0x17 (23)
Round-trip byte: 0x1D (29)
Original context: 56 31 2E 30 42 00 00 00 17* 1E 00 00 00 00 08 20 00
Round-trip context: 56 31 2E 30 42 00 00 00 1D* 1E 00 00 00 00 08 20 00
???????????????????????????????????????????????????????????

???????????????????????????????????????????????????????????
PERFORMANCE SUMMARY
???????????????????????????????????????????????????????????
Total test time: 1.73 seconds
Tests processed: 1 / 23318

Operation breakdown (cumulative):
  compile-roundtrip:     0.06 s (  3.4%)
  compare     :     0.09 s (  5.1%)
  compile-original:     0.14 s (  8.0%)
  compile     :     0.20 s ( 11.3%)
  decompile   :     0.91 s ( 52.9%)

Average per test:
  Total:      0.000 s
  Compile:    0.196 s
  Decompile:  0.913 s
  Compare:    0.089 s

Profile log: test_profile.txt
???????????????????????????????????????????????????????????
[ERROR] Tests run: 1, Failures: 1, Errors: 0, Skipped: 0, Time elapsed: 1.915 s <<< FAILURE! -- in com.kotor.resource.formats.ncs.NCSDecompCLIBytecodeRoundTripTest
[ERROR] com.kotor.resource.formats.ncs.NCSDecompCLIBytecodeRoundTripTest.testBytecodeOnlyRoundTripSuite -- Time elapsed: 1.871 s <<< FAILURE!
org.opentest4j.AssertionFailedError: Bytecode round-trip suite should pass with exit code 0 ==> expected: <0> but was: <1>
	at org.junit.jupiter.api.AssertionFailureBuilder.build(AssertionFailureBuilder.java:151)
	at org.junit.jupiter.api.AssertionFailureBuilder.buildAndThrow(AssertionFailureBuilder.java:132)
	at org.junit.jupiter.api.AssertEquals.failNotEqual(AssertEquals.java:197)
	at org.junit.jupiter.api.AssertEquals.assertEquals(AssertEquals.java:150)
	at org.junit.jupiter.api.Assertions.assertEquals(Assertions.java:559)
	at com.kotor.resource.formats.ncs.NCSDecompCLIBytecodeRoundTripTest.testBytecodeOnlyRoundTripSuite(NCSDecompCLIBytecodeRoundTripTest.java:32)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1604)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1604)

[INFO] 
[INFO] Results:
[INFO] 
[ERROR] Failures: 
[ERROR]   NCSDecompCLIBytecodeRoundTripTest.testBytecodeOnlyRoundTripSuite:32 Bytecode round-trip suite should pass with exit code 0 ==> expected: <0> but was: <1>
[INFO] 
[ERROR] Tests run: 1, Failures: 1, Errors: 0, Skipped: 0
[INFO] 
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time:  5.612 s
[INFO] Finished at: 2025-12-10T11:35:28-06:00
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-surefire-plugin:3.1.2:test (default-test) on project ncsdecomp: There are test failures.
[ERROR] 
[ERROR] Please refer to G:\GitHub\HoloPatcher.NET\vendor\DeNCS\target\surefire-reports for the individual test results.
[ERROR] Please refer to dump files (if any exist) [date].dump, [date]-jvmRun[N].dump and [date].dumpstream.
[ERROR] -> [Help 1]
[ERROR] 
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR] 
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoFailureException
